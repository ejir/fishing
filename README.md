# 节操排行榜 - 2D多人联机游戏 🎮

一个有趣的2D多人在线游戏，玩家可以通过**可视化拖拽编辑器**创建独特的图元角色，并在游戏世界中互动。采用TypeScript重构，提供更好的类型安全和开发体验。

## ✨ 特性

### 🎨 可视化拖拽形象编辑器
- **拖拽移动**: 直接拖拽图元在画布上自由移动
- **拖拽缩放**: 按住 `Shift` + 拖拽进行缩放调整
- **拖拽旋转**: 按住 `Ctrl` + 拖拽进行旋转调整
- **多种图元**: 支持圆形、矩形、三角形、椭圆等基本图形
- **实时预览**: 所见即所得的编辑体验
- **颜色自定义**: 为每个图元选择独特的颜色

### 🎮 游戏玩法
- **2D俯视视角**: 流畅的2D Canvas渲染
- **多人实时互动**: 使用Socket.IO实现低延迟联机
- **节操值系统**: 靠近其他玩家会增加节操值
- **动态体型**: 节操值越高，角色体型越大
- **速度平衡**: 体型越大，移动速度越慢
- **实时排行榜**: 查看谁的节操值最高
- **聊天系统**: 与其他玩家实时交流

### 💻 技术栈
- **TypeScript**: 类型安全的开发体验
- **Canvas 2D API**: 高性能2D图形渲染
- **Socket.IO**: 实时双向通信
- **Express**: 后端服务器框架
- **Vite**: 快速的前端构建工具

## 🚀 快速开始

### 安装依赖
```bash
npm install
```

### 开发模式（同时启动前端和后端）
```bash
npm run dev
```
- 前端: http://localhost:5173
- 后端: http://localhost:3000

### 单独运行
```bash
# 只运行服务器
npm run server

# 只运行客户端
npm run client
```

### 生产构建
```bash
npm run build
```

## 🎯 游戏控制

### 角色编辑器
- **鼠标拖拽**: 移动图元位置
- **Shift + 拖拽**: 缩放图元大小
- **Ctrl + 拖拽**: 旋转图元角度
- **Delete 键**: 删除选中的图元
- **点击图元**: 选中图元（高亮显示）

### 游戏内操作
- **W/A/S/D**: 移动角色
- **鼠标移动**: 控制角色朝向
- **Enter**: 发送聊天消息

## 📁 项目结构

```
├── src/
│   ├── main.ts           # 主游戏逻辑（2D渲染引擎）
│   ├── types.ts          # TypeScript类型定义
│   ├── avatarEditor.ts   # 可视化拖拽形象编辑器
│   ├── player.ts         # 玩家类（2D版本）
│   ├── hud.ts           # HUD界面管理
│   └── chat.ts          # 聊天系统
├── server/
│   └── index.js         # Socket.IO服务器
├── index.html           # HTML入口
├── tsconfig.json        # TypeScript配置
├── vite.config.js       # Vite配置
└── package.json         # 项目依赖
```

## 🎨 自定义角色创建流程

1. **选择图元类型**: 点击圆形、矩形、三角形或椭圆按钮
2. **设置属性**: 
   - 颜色: 使用颜色选择器
   - 大小: 设置像素大小 (10-80px)
   - 旋转: 设置初始旋转角度 (0-360度)
3. **添加图元**: 点击"添加图元"按钮
4. **编辑布局**: 在预览画布上拖拽调整位置、大小和旋转
5. **管理图元**: 在列表中查看、选择或删除图元
6. **开始游戏**: 点击"开始游戏"进入多人世界

## 🌟 游戏机制

### 节操值系统
- 与其他玩家重叠时增加节操值 (+2/秒/人)
- 不重叠时缓慢下降 (-0.5/秒)
- 节操值范围: 0-1000

### 体型变化
- 基础大小: 1.0x
- 计算公式: `size = 1 + (节操值 / 200)`
- 最大可达: 6.0x

### 速度惩罚
- 基础速度: 100%
- 计算公式: `speed = max(30%, 1 - (节操值 / 500))`
- 最低速度: 30%

## 🔧 技术细节

### 渲染系统
- 使用Canvas 2D Context进行渲染
- 相机系统跟随玩家移动
- 网格背景和地图边界显示
- 60 FPS目标帧率

### 网络同步
- WebSocket实时通信
- 玩家位置更新频率: 移动时触发
- 状态更新频率: 100ms (服务器端)
- 自动重连机制

### 性能优化
- TypeScript编译时优化
- Vite HMR快速热更新
- Canvas离屏渲染准备
- 高效的碰撞检测算法

## 📝 开发日志

### v2.0.0 - 2D重构 + TypeScript
- ✅ 从3D转换为2D渲染系统
- ✅ 实现可视化拖拽形象编辑器
- ✅ 完全重构为TypeScript
- ✅ 移除Three.js依赖
- ✅ 优化UI/UX设计
- ✅ 改进游戏性能

### v1.0.0 - 初始版本
- 3D voxel风格游戏
- 基础图元系统
- 多人联机功能

## 🤝 贡献

欢迎提交Issue和Pull Request！

## 📄 许可证

MIT License - 详见 [LICENSE](LICENSE) 文件

## 🎉 致谢

感谢所有为这个项目做出贡献的开发者！

---

**享受游戏，但记住：在现实生活中保持节操！** 😄
